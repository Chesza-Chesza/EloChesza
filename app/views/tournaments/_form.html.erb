<div class="container">  
  <%= form_with(model: tournament, local: true, class: "form-group mb-4") do |form| %>
    <% if tournament.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(tournament.errors.count, "error") %> prohibited this tournament from being saved:</h2>

        <ul>
          <% tournament.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= form.number_field :event_code, class: "form-control", placeholder: "Event code" %>
    </div>
    <div class="field">
      <%= form.text_field :name, class: "form-control", placeholder: "Name"%>
    </div>
    <div class="field">
      <%= form.text_field :city, class: "form-control", placeholder: "City" %>
    </div>
    <div class="field">
      <%= form.text_field :country, class: "form-control", placeholder: "Country" %>
    </div>
    <div class="field">
      <%= form.number_field :players_quantity, class: "form-control", placeholder: "Players quantity" %>
    </div>
    <div class="field">
      <%= form.date_field :start_date, class: "form-control", placeholder: "Start date" %>
    </div>
    <div class="field">
      <%= form.date_field :end_date, class: "form-control", placeholder: "End date" %>
    </div>
    <div class="field">
      <%= form.number_field :total_rounds, class: "form-control", placeholder: "Total rounds"  %>
    </div>
    <div class="field">
      <%= form.select :system, [['swiss', :swiss], ['round robin', :round_robin], ['team', :team], ['other', :other]], {selected: params[:system]}, class: "form-control", placeholder: "System" %>
    </div>
    <div class="field">
      <%= form.label :time_control %>
      <%= form.select :time_control, [['standard', :standard], ['rapid', :rapid], ['blitz', :blitz]], {selected: params[:time_control]}, class: "form-control", placeholder: "Time control" %>
    </div>
    <div class="field">
      <%= form.label :referee_id %>
      <%= form.text_field :referee_id, class: "form-control" %>
    </div>

    <%= form.fields_for :rounds do |r|%>
      <div class="field">
        <%= r.date_field :date, class: "form-control", placeholder: "Date" %>
      </div>
      <div class="field">
        <%= r.number_field :number, class: "form-control", placeholder: "number"  %>
      </div>
      <div class="field">
        <%= r.text_field :tournament_id, class: "form-control", placeholder: "Tournament_id"  %>
      </div><br>
    
      <%= form.fields_for :games do |g|%>
        <div class="field">
          <%= g.number_field :player1_id, class: "form-control", placeholder: "Player1_id" %>
        </div>
        <div class="field">
          <%= g.number_field :player2_id, class: "form-control", placeholder: "Player2_id" %>
        </div>
        <div class="field">
          <%= g.select :result, [1, 0.5, 0], {selected: params[:result]}, class: "form-control", placeholder: "Result" %>
        </div>
        <div class="field">
          <%= g.number_field :won, class: "form-control", placeholder: "Won" %>
        </div>
        <div class="field">
          <%= g.text_field :round_id, class: "form-control", placeholder: "Round_id" %>
        </div>
      <% end %>
    <% end %>

    <div class="actions">
      <%= form.submit :class => 'btn btn-info my-3' %>
    </div>
  <% end %>
</div>
